

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Go学习笔记 &mdash; xiayf的学习笔记</title>
  

  
  

  
  <link href="../../static/css/google-fonts.css" rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="xiayf的学习笔记" href="../../index.html"/>
        <link rel="up" title="Go语言" href="../go.html"/>
        <link rel="next" title="&lt;A tour of Go&gt;学习笔记" href="a-tour-of-go.html"/>
        <link rel="prev" title="《Go Web编程》读书笔记" href="go-web-programming.html"/> 

  
  <script src="../../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="fa fa-home"> 学习笔记</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/read_high_scalability.html">High Scalability 读文笔记</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/read_high_scalability.html#tumblr">Tumblr架构设计</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/Quora_technology_examined.html">读文笔记：Quora’s Technology Examined</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/reference.html">参考资料</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id2">知乎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#netflix">Netflix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#linkedin">LinkedIn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#pinterest">Pinterest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#google">Google</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id5">大众点评网</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id7">阿里巴巴</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#digg">Digg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#heroku">Heroku</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#youtube">YouTube</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#flickr">Flickr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#wikipedia">Wikipedia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id13">腾讯</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id14">豆瓣</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#facebook">Facebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#amazon">Amazon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#yahoo">Yahoo!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#github">Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#disqus">Disqus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#twitter">Twitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#tumblr">Tumblr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#stackoverflow">StackOverflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#instagram">Instagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#youporn">YouPorn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#reddit">Reddit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id25">其他</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../operations/index.html">入门</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/index.html#id2">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/os.html">Linux操作系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/os.html#id1">实践篇</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/os.html#id2">工具篇</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/os.html#id5">原理篇</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/nginx.html">Nginx</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/nginx.html#id1">《Nginx开发从入门到精通》读书笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/nginx.html#id2">模块学习</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/nginx.html#id3">实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/nginx.html#id4">资源</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/db.html">数据库</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/db/memcached.html">Memcached</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/db/redis.html">Redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/db/mysql.html">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/db/sqlite.html">SQLite</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/docker.html">Docker/LXC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/docker.html#id1">推荐资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/varnish.html">Varnish Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/haproxy.html">HAProxy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/haproxy.html#id2">HAProxy源码编译安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/haproxy.html#haproxysyslog-ng">HAProxy的syslog-ng日志配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/haproxy.html#haproxyrsyslogd">HAProxy的rsyslogd日志配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/haproxy.html#id3">HAProxy命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/haproxy.html#haproxy-haproxy">HAProxy配置文件示例（来自 HAProxy的安装和部署 ）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/haproxy.html#id5">参考材料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/uwsgi.html">uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/lvs.html">LVS - Linux Virtual Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/keepalived.html">Keepalived</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/keepalived.html#tlinuxkeepalived">tlinux上源码编译安装Keepalived</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/keepalived.html#vrrp">VRRP协议</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/keepalived.html#id1">Keepalived原理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/keepalived.html#id2">参考资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/supervisor.html">Supervisor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/gunicorn.html">Gunicorn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/openvpn.html">OpenVPN</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/openvpn.html#vpn">如何让客户端流量全部走VPN？</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/dns.html">DNS/BIND</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/dns.html#bind9-9-3">编译安装BIND9.9.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/dns.html#bind-dns">配置BIND（缓存DNS）</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/saltstack.html">SaltStack</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/saltstack.html#saltstack-walkthrough">SaltStack Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/saltstack.html#id2">相关链接</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/zabbix.html">Zabbix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../operations/ntp.html">NTP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../operations/ntp.html#ntp-conf">配置文件ntp.conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/ntp.html#linux">Linux系统时间与硬件时间</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/ntp.html#id3">Linux系统时区与手动校时工作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../operations/ntp.html#id4">Linux的网络校时</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../python.html">Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../python/basic.html">基础知识</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/best-practices.html">最佳实践</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/libs.html">第三方库集锦</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/django.html">Django</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/django.html#id1">参考资料</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/Celery.html">Celery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/gunicorn.html">Gunicorn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/eventlet.html">Eventlet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/paramiko.html">Paramiko</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/sentry.html">sentry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/virtualenv.html">virtualenv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/scipy.html">SciPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python/sqlalchemy.html">SQLAlchemy</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../go.html">Go语言</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="go-web-programming.html">《Go Web编程》读书笔记</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Go学习笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="a-tour-of-go.html">&lt;A tour of Go&gt;学习笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="note-effective-go.html">&lt;Effective Go&gt;学习笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../go.html#id1">语言基础</a></li>
<li class="toctree-l2"><a class="reference internal" href="../go.html#web">Web开发</a></li>
<li class="toctree-l2"><a class="reference internal" href="../go.html#id5">标准库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../go.html#id6">第三方库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../go.html#id7">Web框架</a></li>
<li class="toctree-l2"><a class="reference internal" href="../go.html#id8">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../php.html">PHP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../php/basic.html">基础知识</a></li>
<li class="toctree-l2"><a class="reference internal" href="../php/php-framework.html">PHP web框架</a></li>
<li class="toctree-l2"><a class="reference internal" href="../php/php-internal.html">深入理解PHP内核</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../shell.html">Shell编程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Erlang.html">Erlang</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Lua.html">Lua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../web.html">Web开发问题记录</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../web.html#id1">响应式设计</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web.html#id6">工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web.html#id9">浏览器兼容问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web.html#id10">最佳实践</a></li>
<li class="toctree-l2"><a class="reference internal" href="../web.html#id11">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../js.html">JavaScript</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../js/basic.html">JavaScript基础</a></li>
<li class="toctree-l2"><a class="reference internal" href="../js/frontend-dv.html">前端数据可视化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../js/frontend-framework.html">前端框架</a></li>
<li class="toctree-l2"><a class="reference internal" href="../js/frontend-tool.html">前端工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../js/modular-frontend.html">前端模块化开发</a></li>
<li class="toctree-l2"><a class="reference internal" href="../js/nodejs.html">Node.js</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../css.html">CSS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../css/basic.html">基础知识</a></li>
<li class="toctree-l2"><a class="reference internal" href="../css/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../css/semantic-ui.html">Semantic UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../css/css-mastery.html">读书笔记：精通CSS-高级Web标准解决方案</a></li>
<li class="toctree-l2"><a class="reference internal" href="../css.html#id1">推荐阅读</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../base/os.html">操作系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../base/os.html#id2">参考资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../base/compiler.html">编译原理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../base/compiler.html#id2">参考资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../base/algorithm.html">算法与数据结构</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../base/algorithm.html#id2">贝塞尔曲线</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../base/network.html">网络</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../base/network/sdn.html">软件定义网络（SDN）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../base/network/rsync.html">Rsync</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../base/network/oauth2.html">OAuth2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../base/network/read_hpbn.html">读书笔记：High-Performance Browser Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../base/network.html#id2">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../base/security.html">Web安全</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../others/quotes.html">启示语录</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../others/data-visual.html">数据可视化</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#acharts">acharts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#echarts">ECharts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#polymaps">Polymaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#highcharts-js">Highcharts JS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#amcharts">amCharts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#peity">Peity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#kartograph">Kartograph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#d3-js">D3.js</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#raphael">Raphael</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#nvd3">NVD3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#flot">Flot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#javascript-infovis-toolkit">JavaScript InfoVis Toolkit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#rickshaw">Rickshaw</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#graph-tool">graph-tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#chap-links-library">CHAP Links Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#id2">参考资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/git.html">Git学习笔记</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/git/git-simple-guide.html">Git-简易指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/git/visual-git-guide.html">图解Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/git/pro-git-cn.html">Pro Git</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/message_queue.html">消息队列</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/message_queue.html#id2">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/storage.html">数据存储</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/storage.html#bitcask">BitCask</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/distributed-system.html">分布式系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/distributed-system.html#id2">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/quora-collection.html">Quora问答精选</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../others/stackoverflow-collection.html">StackOverflow问答精选</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../others/awesomes.html">Awesome系列</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../others/other.html">碎碎念</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/other/taobao-ten-years.html">《淘宝技术这十年》读书笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/other/inspired.html">启示录-打造用户喜爱的产品</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">学习笔记</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../go.html">Go语言</a> &raquo;</li>
      
    <li>Go学习笔记</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../sources/development/golang/go-learning-note.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="go">
<h1>Go学习笔记<a class="headerlink" href="#go" title="Permalink to this headline">¶</a></h1>
<p><a class="reference external" href="https://github.com/qyuhen/book/blob/master/Go%20%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%20%E7%AC%AC%E4%BA%8C%E7%89%88.pdf">电子书链接</a></p>
<div class="section" id="id2">
<h2>第一章 类型<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>引用类型包括slice、map和channel。它们有复杂的内部结构，除了申请内存外，还需要初始化相关属性。</p>
<p>内置函数new计算类型大小，为其分配零值内存，返回指针。而make会被编译器翻译成具体的创建函数，由其分配内存和初始化成员结构，返回对象而非指针。</p>
<hr class="docutils" />
<p>不支持隐式类型转换，即便是从窄向宽转换也不行。</p>
<p>不能将其他类型的值当作bool值使用。</p>
<hr class="docutils" />
<p>字符串是不可变值类型，内部用指针指向UTF-8字节数组。</p>
<ul class="simple">
<li>默认值是空字符串&#8221;&#8220;。</li>
<li>用索引号访问某字节，如s[i]。</li>
<li>不能用序号获取字节元素指针。&amp;s[i]非法。</li>
<li>不可变类型，无法修改字节数组。</li>
<li>字节数组尾部不包含NULL。</li>
</ul>
<p>要修改字符串，可先将其转换成``[]rune``或``[]byte``，完成后再转换为``string``。无论哪种转换，都会重新分配内存，并复制字节数组。</p>
<div class="highlight-python"><div class="highlight"><pre>s := &quot;abcd&quot;
bs := []byte(s)
bs[1] = &#39;B&#39;
s2 := string(bs)

u := &quot;电脑&quot;
us := []rune(u)
us[1] = &#39;话&#39;
u2 := string(us)
</pre></div>
</div>
<p>用for循环遍历字符串时，也有byte和rune两种方式。</p>
<div class="highlight-python"><div class="highlight"><pre>func main() {
  s := &quot;abc汉字&quot;

  for i := 0; i &lt; len(s); i++ { // byte
    fmt.Printf(&quot;%c,&quot;, s[i])
  }

  fmt.Println()

  for _, r := range s {     // rune
    fmt.Printf(&quot;%c,&quot;, r)
  }
}
</pre></div>
</div>
<p>输出：</p>
<div class="highlight-python"><div class="highlight"><pre>a,b,c,æ,±,,å,­,,
a,b,c,汉,字,
</pre></div>
</div>
<hr class="docutils" />
<p>可以在unsafe.Pointer和任意类型指针间进行转换。</p>
<div class="highlight-python"><div class="highlight"><pre>func main() {
  x := 0x12345678

  p := unsafe.Pointer(&amp;x)   // *int -&gt; Pointer
  n := (*[4]byte)(p)    // Pointer -&gt; *[4]byte

  for i := 0; i &lt; len(n); i++ {
    fmt.Println(&quot;%X&quot;, n[i])
  }
}
</pre></div>
</div>
<p>输出：</p>
<div class="highlight-python"><div class="highlight"><pre>78 56 34 12
</pre></div>
</div>
<hr class="docutils" />
<p>可将类型分为命名和未命名两大类。命名类型包括bool、int、string等，而array、slice、map等和具体元素类型、长度等有关，属于未命名类型。</p>
<p>具有相同声明的未命名类型被视为同一类型。</p>
<ul class="simple">
<li>具有相同基类型的指针。</li>
<li>具有相同元素类型和长度的array。</li>
<li>具有相同元素类型的slice。</li>
<li>具有相同键值类型的map。</li>
<li>具有相同元素类型和传送方向的channe。</li>
<li>具有相同字段序列（字段名、类型、标签、顺序）的匿名struct。</li>
<li>签名相同（参数和返回值，不包括参数名称）的function。</li>
<li>方法集相同（方法名、方法签名相同、和次序无关）的interface。</li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="id3">
<h2>第二章 表达式<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>switch分支表达式可以是任意类型，不限于常量。可省略break，默认自动终止。如需要继续下一分支，需使用fallthrough。</p>
<div class="highlight-python"><div class="highlight"><pre>x := []int{1, 2, 3}
i := 2

switch i {
  case x[1]:
    println(&quot;a&quot;)
    fallthrough
  case 1, 3:
    println(&quot;b&quot;)
  default:
    println(&quot;c&quot;)
}
</pre></div>
</div>
<p>输出：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">a</span>
<span class="n">b</span>
</pre></div>
</div>
<p>省略条件表达式，可当if...else if...else使用。</p>
<div class="highlight-python"><div class="highlight"><pre>switch {
  case x[1] &gt; 0:
    println(&quot;a&quot;)
  case x[1] &lt; 0:
    println(&quot;b&quot;)
  default:
    println(&quot;c&quot;)
}

switch i := x[2]; {  // 带初始化语句
  case i &gt; 0:
    println(&quot;a&quot;)
  case i &lt; 0:
    println(&quot;b&quot;)
  default:
    println(&quot;c&quot;)
}
</pre></div>
</div>
<p>支持函数内goto跳转。表签名区分大小写，未使用的标签会引发错误。</p>
<p>break可用于for、switch、select，而continue仅能用于for循环。</p>
</div>
<div class="section" id="id4">
<h2>第三章 函数<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h2>
<p>函数定义不支持嵌套（nested）、重载（overload）和默认参数（default parameter）。</p>
<ul class="simple">
<li>无需声明原型</li>
<li>支持不定长变参</li>
<li>支持多返回值</li>
<li>支持命名返回参数</li>
<li>支持匿名函数和闭包</li>
</ul>
<p>函数是第一类对象，可作为参数传递。建议将复杂签名定义为函数类型，以便于阅读。</p>
<div class="highlight-python"><div class="highlight"><pre>func test(fn func() int) int {
  return fn()
}

type FormatFunc func(s string, x, y int) string     // 定义函数原型
func format(fn FormatFunc, s string, x, y int) string {
  return fn(s, x, y)
}

func main() {
  s1 := test(func() int { return 100 })     // 直接将匿名函数当参数

  s2  := format(func(s string, x, y int) string {
    return fmt.Sprintf(s, x, y)
  }, &quot; %d, %d&quot;, 10, 20)

  println(s1, s2)
}
</pre></div>
</div>
<p>有返回值的函数，必须有明确的终⽌语句，否则会引发编译错误。</p>
<hr class="docutils" />
<p>变参本质上就是slice。只能有一个，且必须是最后一个。</p>
<hr class="docutils" />
<p>不能用容器对象接收多返回值。只能用多个变量，或“_”忽略。</p>
<p>多返回值可直接作为其他函数的调用实参。</p>
<p>命名返回参数允许defer延迟调用通过闭包读取和修改。</p>
<div class="highlight-python"><div class="highlight"><pre>func add(x, y int) (z int) {
  defer func() {
    z += 100
  }()

  z = x + y
  return
}

func main() {
  println(add(1, 2))    // 输出：103
}
</pre></div>
</div>
<p>显式return返回前，会先修改命名返回参数。</p>
<div class="highlight-python"><div class="highlight"><pre>func add(x, y int) (z int) {
  defer func() {
    println(z)      // 输出：203
  }()

  z = x + y
  return z + 200        // 执行顺序：(z = z + 200) -&gt; (call defer) -&gt; (ret)
}

func main() {
  println(add(1, 2))      // 输出：203
}
</pre></div>
</div>
<hr class="docutils" />
<p>匿名函数可赋值给变量，作为结构字段，或者在channel里传送。</p>
<div class="highlight-python"><div class="highlight"><pre>// function variable

fn := func() { println(&quot;Hello World!&quot;) }
fn()

// function collection
fns := [](func(x int) int){
  func(x int) int { return x + 1 },
  func(x int) int { return x + 2 },
}

println(fns[0](100))

// function as field
d := struct {
  fn func() string
}{
  fn: func() string { return &quot;Hello, World!&quot; },
}

println(d.fn())

// channel of function
fc := make(chan func() string, 2)
fc &lt;- func() string { return &quot;Hello, World!&quot; }
println((&lt;-fc)())
</pre></div>
</div>
<hr class="docutils" />
<p>闭包复制的是原对象指针，这就很容易解释延迟引用现象。</p>
<div class="highlight-python"><div class="highlight"><pre>func test() func() {
  x := 100
  fmt.Printf(&quot;x (%p) = %d\n&quot;, &amp;x, x)

  return func() {
    fmt.Printf(&quot;x (%p) = %d\n&quot;, &amp;x, x)
  }
}

func main() {
  f := test()
  f()
}
</pre></div>
</div>
<p>输出：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="p">(</span><span class="mh">0x2101ef018</span><span class="p">)</span> <span class="o">=</span> <span class="mi">100</span>
<span class="n">x</span> <span class="p">(</span><span class="mh">0x2101ef018</span><span class="p">)</span> <span class="o">=</span> <span class="mi">100</span>
</pre></div>
</div>
<hr class="docutils" />
<p>关键字defer用于注册延迟调用。这些调用直到ret前才被执行，通常用于释放资源或错误处理。</p>
<p>多个defer注册，按FILO次序执行。哪怕函数或某个延迟调用发生错误，这些调用依旧会被执行。</p>
<p>如果需要保护代码片段，可将代码块重构成匿名函数，如此可确保后续代码被执行。</p>
<div class="highlight-python"><div class="highlight"><pre>func test(x, y int) {
  var z int

  func() {
    defer func() {
      if recover() != nil { z = 0 }
    }()

    z = x / y
    return
  }()

  println(&quot;x / y =&quot;, z)
}
</pre></div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="id5">
<h2>第四章 数据<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h2>
<div class="section" id="array">
<h3>Array<a class="headerlink" href="#array" title="Permalink to this headline">¶</a></h3>
<p>和以往认知的数组有很大不同。</p>
<ul class="simple">
<li>数组是值类型，赋值和传参会复制整个数组，而不是指针。</li>
<li>数组长度必须是常量，且是类型的组成部分。[2]int和[3]int是不同类型</li>
<li>支持“==”、&#8221;!=&#8221;操作符，因为内存总是被初始化过的。</li>
<li>指针数组[n]*T，数组指针*[n]T。</li>
</ul>
<p>值拷贝行为会造成性能问题，通常会建议使用slice，或者数组指针。</p>
<p>内置函数len和cap都返回数组长度（元素数量）。</p>
</div>
<div class="section" id="slice">
<h3>Slice<a class="headerlink" href="#slice" title="Permalink to this headline">¶</a></h3>
<p>slice并不是数组或者数组指针。它通过内部指针和相关属性引用数组片段，以实现变长方案。</p>
<div class="highlight-python"><div class="highlight"><pre>struct Slice
{               // must not move anything
  byte* array;  // actual data
  uintgo  len;  // number of elements
  uintgo  cap;  // allocated number of elements
}
</pre></div>
</div>
<ul class="simple">
<li>引用类型。但自身是结构体，值拷贝传递。</li>
<li>属性len标识可用元素数量，读写操作不能超过该限制。</li>
<li>属性cap标识最大扩张容量，不能超过数组限制。</li>
<li>如果slice == nil，那么len、cap结果都等于0。</li>
</ul>
<p>大批量添加数据时，应该避免使用append，因为频繁创建slice对象会影响性能。<strong>可一次性分配len足够大的slice，直接用索引号进行操作。</strong>
还有，<strong>及时释放不再使用的slice对象</strong>，避免持有过期数组，造成GC无法回收。</p>
</div>
<div class="section" id="map">
<h3>Map<a class="headerlink" href="#map" title="Permalink to this headline">¶</a></h3>
<p>map是引用类型，哈希表。键必须是支持相等运算符(==、!=)类型，比如number、string、pointer、array、struct，以及对应的interface。
值可以是任意类型，没有限制。</p>
</div>
<div class="section" id="struct">
<h3>Struct<a class="headerlink" href="#struct" title="Permalink to this headline">¶</a></h3>
<p>值类型，赋值和传参会复制全部内容，可用“_”定义补位字段(?)，支持指向自身类型的指针成员。</p>
<p>支持“==”、“!=”相等操作符，可用作map键类型。</p>
<p>可定义字段标签，用反射读取。标签是类型的组成部分。</p>
<div class="highlight-python"><div class="highlight"><pre>var u1 struct { name string &quot;username&quot; }
var u2 struct { name string }

u2 = u1   // Error: cannot use u1 (type struct { name string &quot;username&quot; }) as
          //        type struct { name string } in assignment
</pre></div>
</div>
<p><strong>匿名字段</strong></p>
<p>匿名字段不过是一种语法糖，从根本上说，就是一个与成员类型同名（不包含包名）的字段。被匿名嵌入的可以是任何类型，当然也包括指针。</p>
<div class="highlight-python"><div class="highlight"><pre>type User struct {
  name string
}

type Manager struct {
  User
  title string
}

m := Manager{
  User: User{&quot;Tom&quot;},    // 匿名字段的显式字段名，和类型名相同。
  title: &quot;Administrator&quot;,
}
</pre></div>
</div>
<p>可以像普通字段那样访问匿名字段成员，编译器从外向内逐级查找所有层次的匿名字段，直到发现目标或出错。</p>
<div class="highlight-python"><div class="highlight"><pre>type Resource struct {
  id int
}

type User struct {
  Resource
  name string
}

type Manager struct {
  User
  title string
}

var m Manager
m.id = 1
m.name = &quot;Jack&quot;
m.title = &quot;Administrator&quot;
</pre></div>
</div>
<p>外层同名字段会遮蔽嵌入字段成员，相同层次的同名字段也会让编译器无所适从。解决⽅法是使用显式字段名。</p>
</div>
</div>
<div class="section" id="id6">
<h2>第五章 方法<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h2>
<p>可以像字段成员那样访问匿名字段方法，编译器负责查找。</p>
<div class="highlight-python"><div class="highlight"><pre>type User struct {
  id int
  name string
}

type Manager struct {
  User
}

func (self *User) ToString() string {   // receiver = &amp;(Manager.User)
  return fmt.Sprintf(&quot;User: %p, %v&quot;, self, self)
}

func main() {
  m := Manager{User{1, &quot;Tom&quot;}}

  fmt.Printf(&quot;Manager: %p\n&quot;, &amp;m)

  fmt.Println(m.ToString())
}
</pre></div>
</div>
<p>输出：</p>
<div class="highlight-python"><div class="highlight"><pre>Manager: 0x2102281b0
User: 0x2102281b0, &amp;{1 Tom}
</pre></div>
</div>
<p>通过匿名字段，可获得和继承类似的复用能力。依据编译器查找次序，只需在外层定义同名方法，就可以实现&#8221;override&#8221;。</p>
<div class="highlight-python"><div class="highlight"><pre>type User struct {
  id int
  name string
}

type Manager struct {
  User
  title string
}

func (self *User) ToString() string {
  return fmt.Sprintf(&quot;User: %p, %v&quot;, self, self)
}

func (self *Manager) ToString() string {
  return fmt.Sprintf(&quot;Manager: %p, %v&quot;, self, self)
}

func main() {
  m := Manager{User{1, &quot;Tom&quot;}, &quot;Administrator&quot;}

  fmt.Println(m.ToString())
  fmt.Println(m.User.ToString())
}
</pre></div>
</div>
<p>输出：</p>
<div class="highlight-python"><div class="highlight"><pre>Manager: 0x2102271b0, &amp;{{1 Tom} Administrator}
User: 0x2102271b0, &amp;{1 Tom}
</pre></div>
</div>
<div class="section" id="id7">
<h3>方法集<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>每个类型都有与之关联的方法集，这会影响到接口实现规则。</p>
<ul class="simple">
<li>类型T方法集包含全部receiver T方法</li>
<li>类型*T方法集包含全部receiverT + *T方法。</li>
<li>如类型S包含匿名字段T，则S方法集包含T方法。</li>
<li>如类型S包含匿名方法*T，则S方法集包含T + *T的方法。</li>
<li>不管嵌入T或*T，*S方法集总是包含T + *T方法。</li>
</ul>
</div>
</div>
<div class="section" id="id8">
<h2>第六章 接口<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h2>
<p>接口是一个或多个方法签名的集合，任何类型的方法集中只要拥有与之对应的全部方法，就表示它“实现”了该接口，无需在该类型上显式添加接口声明。</p>
<ul class="simple">
<li>接口命名习惯以er结尾，结构体。</li>
<li>接口只有方法签名，没有实现。</li>
<li>接口没有数据字段。</li>
<li>可在接口中嵌入其他接口。</li>
<li>类型可实现多个接口。</li>
</ul>
<p>空接口interface{}没有任何方法签名，也就意味着任何类型都实现了空接口。其作用类似面向对象语言中的根对象object。</p>
<p>匿名接口可用作变量类型，或结构成员。</p>
<div class="highlight-python"><div class="highlight"><pre>type Tester struct {
  s interface {
    String() string
  }
}

type User struct {
  id int
  name string
}

func (self *User) String() string {
  return fmt.Sprintf(&quot;user %d, %s&quot;, self.id, self.name)
}

func main() {
  t := Tester{&amp;User{1, &quot;Tom&quot;}}
  fmt.Println(t.s.String())
}
</pre></div>
</div>
<p>输出：</p>
<div class="highlight-python"><div class="highlight"><pre>user 1, Tom
</pre></div>
</div>
<p>某些时候，让函数直接“实现”接口能省不少事。</p>
<div class="highlight-python"><div class="highlight"><pre>type Tester interface {
  Do()
}

type FuncDo func()
func (self FunDo) Do() { self() }

func main() {
  var t Tester = FuncDo(func() { println(&quot;Hello, World!&quot;) })
  t.Do()
}
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h2>第七章 并发<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<p>调度器不能保证goroutine执行次序，且进程退出时不会等待goroutine结束。</p>
<p>官方默认实现，进程启动后仅允许一个系统线程服务于goroutine。可使用环境变量或标准库
函数runtime.GOMAXPROCS修改，让调度器用多个线程实现多核并行，而不仅仅是并发。</p>
<div class="highlight-python"><div class="highlight"><pre>func sum(id int) {
  var x int64
  for i := 0; i &lt; math.MaxUint32; i++ {
    x += int64(i)
  }

  println(id, x)
}

func main() {
  wg := new(sync.WaitGroup)
  wg.Add(2)

  for i := 0; i &lt; 2; i++ {
    go func(id int) {
      defer wg.Done()
      sum(id)
    }(i)
  }

  wg.Wait()
}
</pre></div>
</div>
<p>调用runtime.Goexit将立即终止当前goroutine执行，调度器确保所有已注册defer延迟调用被执行。</p>
<div class="highlight-python"><div class="highlight"><pre>func main() {
  wg := new(sync.WaitGroup)
  wg.Add(1)

  go func() {
    defer wg.Done()
    defer println(&quot;A.defer&quot;)


    func() {
      defer println(&quot;B.defer&quot;)
      runtime.Goexit()        // 终止当前goroutine
      println(&quot;B&quot;)            // 不会执行
    }()

    println(&quot;A&quot;)              // 不会执行
  }()

  wg.Wait()
}
</pre></div>
</div>
<p>输出：</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">B</span><span class="o">.</span><span class="n">defer</span>
<span class="n">A</span><span class="o">.</span><span class="n">defer</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>func main() {
  data := make(chan int)    // 数据交换队列
  exit := make(chan bool)   // 退出通知

  go func() {
    for d := range data {   // 从队列迭代接收数据，直到close。
      fmt.Println(d)
    }

    fmt.Println(&quot;recv over.&quot;)
    exit &lt;- true              // 发出退出通知
  }()

  data &lt;- 1                 // 发送数据
  data &lt;- 2
  data &lt;- 3
  /*
  The close built-in function closes a channel, which must be either bidirectional or send-only. It should be executed
  only by the sender, never the receiver, and has the effect of shutting down the channel after the last sent value
  is received. After the last value has been received from a closed channel c, any receive from c will succeed without blocking,
  returning the zero value for the channel element.
  */
  close(data)               // 关闭队列

  fmt.Println(&quot;send over.&quot;)
  &lt;-exit                    // 等待退出通知
}
</pre></div>
</div>
<p>输出：</p>
<div class="highlight-python"><div class="highlight"><pre>1
2
3
send over.
recv over.
</pre></div>
</div>
</div>
<div class="section" id="id10">
<h2>第八章 包<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h2>
<p>可在GOPATH环境变量列表中添加多个workspace, 但不能和GOROOT相同。</p>
<div class="highlight-python"><div class="highlight"><pre>export GOPATH=$HOME/projects/golib:$HOME/projects/go
</pre></div>
</div>
<p>通常go get使用第一个workspace保存下载的第三方库。</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">os.Args返回命令行参数，os.Exit终止进程。
要获取正确的可执行文件路径，可用filepath.Abs(exec.LookPath(os.Args[0]))。</p>
</div>
<p><strong>导入包</strong></p>
<p>在导入时，可指定包成员访问方式。比如对包重命名，以避免同名冲突。</p>
<div class="highlight-python"><div class="highlight"><pre>import &quot;yuhen/test&quot;     // 默认模式：test.A
import M &quot;yuhen/test&quot;   // 包重命名： M.A
import . &quot;yuhen/test&quot;   // 简便模式：A
import _ &quot;yuhen/test&quot;   // 非导入模式：仅让该包执行初始化函数。
</pre></div>
</div>
<p>对于当前目录下的子包，除使用默认完整导入路径外，还可使用local方式。</p>
<div class="highlight-python"><div class="highlight"><pre>workspace
    |
    +--- src
          |
          +--- learn
                  |
                  +--- main.go
                  |
                  +--- test
                          |
                          +--- test.go
</pre></div>
</div>
<p><em>main.go</em></p>
<div class="highlight-python"><div class="highlight"><pre>import &quot;learn/test&quot;     // 正常模式
import &quot;./test&quot;         // 本地模式，仅对go run main.go有效。
</pre></div>
</div>
<p><strong>初始化</strong></p>
<p>初始化函数：</p>
<ul class="simple">
<li>每个源文件都可以定义一个或多个(?)初始化函数。</li>
<li>编译器不保证多个初始化函数执行次序。</li>
<li>初始化函数在单一线程被调用，仅执行一次。</li>
<li>初始化函数在包所有全局变量初始化后执行。</li>
<li>在所有初始化函数结束后才执行main.main。</li>
<li>无法调用初始化函数。</li>
</ul>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="a-tour-of-go.html" class="btn btn-neutral float-right" title="&lt;A tour of Go&gt;学习笔记">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="go-web-programming.html" class="btn btn-neutral" title="《Go Web编程》读书笔记"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, youngsterxyf.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../static/jquery.js"></script>
      <script type="text/javascript" src="../../static/underscore.js"></script>
      <script type="text/javascript" src="../../static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>