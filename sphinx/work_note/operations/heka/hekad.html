

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>hekad &mdash; xiayf的学习笔记</title>
  

  
  

  
  <link href="../../static/css/google-fonts.css" rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="../../static/css/theme.css" type="text/css" />
  

  
    <link rel="top" title="xiayf的学习笔记" href="../../index.html"/>
        <link rel="up" title="heka" href="../heka.html"/>
        <link rel="next" title="PHP" href="../../development/php.html"/>
        <link rel="prev" title="heka" href="../heka.html"/> 

  
  <script src="../../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="../../index.html" class="fa fa-home"> 学习笔记</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/read_high_scalability.html">High Scalability 读文笔记</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/read_high_scalability.html#tumblr">Tumblr架构设计</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/Quora_technology_examined.html">读文笔记：Quora’s Technology Examined</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#the-search-box">The Search-Box</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#webnode2-and-livenode">Webnode2 And LiveNode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#amazon-web-services">Amazon Web Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#haproxy-load-balancing">HAProxy Load-Balancing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#nginx">Nginx</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#pylons-and-paste">Pylons And Paste</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#python">Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#thrift">Thrift</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#tornado">Tornado</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#long-polling-comet">Long Polling (Comet)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#mysql">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#memcached">Memcached</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#git">Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#javascript-placement">JavaScript Placement</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/Quora_technology_examined.html#charlie-cheever-follows-14-rules-for-faster-loading-web-sites">Charlie Cheever Follows &#8220;14 Rules for Faster-Loading Web Sites&#8221;</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../architecture/reference.html">参考资料</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id2">知乎</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#netflix">Netflix</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#linkedin">LinkedIn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#pinterest">Pinterest</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#google">Google</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id5">大众点评网</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id7">阿里巴巴</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#digg">Digg</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#heroku">Heroku</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#youtube">YouTube</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#flickr">Flickr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#wikipedia">Wikipedia</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id13">腾讯</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id14">豆瓣</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#facebook">Facebook</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#amazon">Amazon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#yahoo">Yahoo!</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#github">Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#disqus">Disqus</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#twitter">Twitter</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#tumblr">Tumblr</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#stackoverflow">StackOverflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#instagram">Instagram</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#youporn">YouPorn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#reddit">Reddit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../architecture/reference.html#id25">其他</a></li>
</ul>
</li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">入门</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../index.html#id2">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../os.html">Linux操作系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../os.html#id1">实践篇</a></li>
<li class="toctree-l2"><a class="reference internal" href="../os.html#id2">工具篇</a></li>
<li class="toctree-l2"><a class="reference internal" href="../os.html#id5">原理篇</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../nginx.html">Nginx</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../nginx.html#id1">《Nginx开发从入门到精通》读书笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nginx.html#id2">模块学习</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nginx.html#id3">实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nginx.html#id4">资源</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../uwsgi.html">uWSGI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../db.html">数据库</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../db/memcached.html">Memcached</a></li>
<li class="toctree-l2"><a class="reference internal" href="../db/redis.html">Redis</a></li>
<li class="toctree-l2"><a class="reference internal" href="../db/mysql.html">MySQL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../db/sqlite.html">SQLite</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../lvs.html">LVS - Linux Virtual Server</a></li>
<li class="toctree-l1"><a class="reference internal" href="../varnish.html">Varnish Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="../haproxy.html">HAProxy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../haproxy.html#id2">HAProxy源码编译安装</a></li>
<li class="toctree-l2"><a class="reference internal" href="../haproxy.html#haproxysyslog-ng">HAProxy的syslog-ng日志配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../haproxy.html#haproxyrsyslogd">HAProxy的rsyslogd日志配置</a></li>
<li class="toctree-l2"><a class="reference internal" href="../haproxy.html#id3">HAProxy命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="../haproxy.html#haproxy-haproxy">HAProxy配置文件示例（来自 HAProxy的安装和部署 ）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../haproxy.html#id5">参考材料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../keepalived.html">Keepalived</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../keepalived.html#tlinuxkeepalived">tlinux上源码编译安装Keepalived</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keepalived.html#vrrp">VRRP协议</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keepalived.html#id1">Keepalived原理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../keepalived.html#id2">参考资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../fabric.html">Fabric</a></li>
<li class="toctree-l1"><a class="reference internal" href="../supervisor.html">Supervisor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../gunicorn.html">Gunicorn</a></li>
<li class="toctree-l1"><a class="reference internal" href="../openvpn.html">OpenVPN</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../openvpn.html#vpn">如何让客户端流量全部走VPN？</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Docker/LXC</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../docker.html#id1">推荐资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dns.html">DNS/BIND</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../dns.html#bind9-9-3">编译安装BIND9.9.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dns.html#bind-dns">配置BIND（缓存DNS）</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../zookeeper.html">Zookeeper</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../zookeeper.html#zookeeper-overview">Zookeeper Overview</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../saltstack.html">SaltStack</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../saltstack.html#saltstack-walkthrough">SaltStack Walkthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="../saltstack.html#id2">相关链接</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../zabbix.html">Zabbix</a></li>
<li class="toctree-l1"><a class="reference internal" href="../buildbot.html">Buildbot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coreos.html">coreOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ntp.html">NTP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../ntp.html#ntp-conf">配置文件ntp.conf</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ntp.html#linux">Linux系统时间与硬件时间</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ntp.html#id3">Linux系统时区与手动校时工作</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ntp.html#id4">Linux的网络校时</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../influxdb.html">InfluxDB</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../influxdb.html#id1">参考资料</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../heka.html">heka</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../heka.html#id1">Heka文档阅读笔记</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../development/php.html">PHP</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../development/php/basic.html">基础知识</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/php/basic.html#php">《PHP手册》阅读笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/php/basic.html#id10">常用函数</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/php/php-framework.html">PHP web框架</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/php/php-internal.html">深入理解PHP内核</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/python.html">Python</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/basic.html">基础知识</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/best-practices.html">最佳实践</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/libs.html">第三方库集锦</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/django.html">Django</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/django.html#id1">参考资料</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/Celery.html">Celery</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/gunicorn.html">Gunicorn</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/eventlet.html">Eventlet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/paramiko.html">Paramiko</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/sentry.html">sentry</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/virtualenv.html">virtualenv</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/scipy.html">SciPy</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/python/sqlalchemy.html">SQLAlchemy</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/js.html">JavaScript</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../development/js/basic.html">JavaScript基础</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/js/frontend-dv.html">前端数据可视化</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/js/frontend-framework.html">前端框架</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/js/frontend-tool.html">前端工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/js/modular-frontend.html">前端模块化开发</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/js/nodejs.html">Node.js</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/css.html">CSS</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../development/css/basic.html">基础知识</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/css/bootstrap.html">Bootstrap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/css/semantic-ui.html">Semantic UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/css/css-mastery.html">读书笔记：精通CSS-高级Web标准解决方案</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/css.html#id1">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/shell.html">Shell编程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/go.html">Go语言</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../development/golang/go-web-programming.html">《Go Web编程》读书笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/golang/go-learning-note.html">Go学习笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/golang/a-tour-of-go.html">&lt;A tour of Go&gt;学习笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/golang/note-effective-go.html">&lt;Effective Go&gt;学习笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/go.html#id1">语言基础</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/go.html#web">Web开发</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/go.html#id5">标准库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/go.html#id6">第三方库</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/go.html#id7">Web框架</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/go.html#id8">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/web.html">Web开发问题记录</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../development/web.html#id1">响应式设计</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/web.html#id6">工具</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/web.html#id9">浏览器兼容问题</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/web.html#id10">最佳实践</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../development/web.html#id11">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../development/make.html">CMake/Make</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/r.html">R</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development/octave.html">Octave</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../base/os.html">操作系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../base/os.html#id2">参考资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../base/compiler.html">编译原理</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../base/compiler.html#id2">参考资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../base/algorithm.html">算法与数据结构</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../base/algorithm.html#id2">贝塞尔曲线</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../base/network.html">网络</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../base/network/sdn.html">软件定义网络（SDN）</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../base/network/rsync.html">Rsync</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../base/network/oauth2.html">OAuth2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../base/network/read_hpbn.html">读书笔记：High-Performance Browser Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../base/network.html#id2">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../base/security.html">Web安全</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../others/quotes.html">启示语录</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../others/data-visual.html">数据可视化</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#acharts">acharts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#echarts">ECharts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#polymaps">Polymaps</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#highcharts-js">Highcharts JS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#amcharts">amCharts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#peity">Peity</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#kartograph">Kartograph</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#d3-js">D3.js</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#raphael">Raphael</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#nvd3">NVD3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#flot">Flot</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#javascript-infovis-toolkit">JavaScript InfoVis Toolkit</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#rickshaw">Rickshaw</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#graph-tool">graph-tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#chap-links-library">CHAP Links Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/data-visual.html#id2">参考资料</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/git.html">Git学习笔记</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/git/git-simple-guide.html">Git-简易指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/git/visual-git-guide.html">图解Git</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/git/pro-git-cn.html">Pro Git</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/message_queue.html">消息队列</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/message_queue.html#id2">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/storage.html">数据存储</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/storage.html#bitcask">BitCask</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/distributed-system.html">分布式系统</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/distributed-system.html#id2">推荐阅读</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../others/quora-collection.html">Quora问答精选</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../others/stackoverflow-collection.html">StackOverflow问答精选</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../others/other.html">碎碎念</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../others/other/taobao-ten-years.html">《淘宝技术这十年》读书笔记</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../others/other/inspired.html">启示录-打造用户喜爱的产品</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">学习笔记</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../heka.html">heka</a> &raquo;</li>
      
    <li>hekad</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="../../sources/operations/heka/hekad.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="hekad">
<h1>hekad<a class="headerlink" href="#hekad" title="Permalink to this headline">¶</a></h1>
<p>The hekad daemon is the core component of the heka project, which handles routing messages, generating metrics, aggregating statsd-type messages, running plugins on the messages, and sending messages to the configured destinations.</p>
<div class="section" id="configuring-hekad">
<h2>Configuring hekad<a class="headerlink" href="#configuring-hekad" title="Permalink to this headline">¶</a></h2>
<p>A hekad configuration file specifies what inputs, decoders, filters, and outputs will be loaded. The configuration file is in <a class="reference external" href="https://github.com/mojombo/toml">TOML</a> format.
TOML looks is very similar to INI configuration formats, but with slightly more rich data structures and nesting support.</p>
<p>The config file is broken into sections, with each section representing a single instance of a plugin. The section name specifies the name of the plugin, and the “type” parameter specifies the plugin type;
this must match one of the types registered via the <em>pipeline.RegisterPlugin</em> function.</p>
<div class="highlight-python"><div class="highlight"><pre>[tcp:5565]
type=&quot;TcpInput&quot;
parser_type=&quot;message.proto&quot;
decoder=&quot;ProtobufDecoder&quot;
address=&quot;:5565&quot;
</pre></div>
</div>
<p>If you choose a plugin name that also happens to be a plugin type name, then you can omit the “type” parameter from the section and the specified name will be used as the type.
Thus, the following section describes a plugin named “TcpInput”, also of type “TcpInput”:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">TcpInput</span><span class="p">]</span>
<span class="n">address</span> <span class="o">=</span> <span class="s">&quot;:5566&quot;</span>
<span class="n">parser_type</span> <span class="o">=</span> <span class="s">&quot;message.proto&quot;</span>
<span class="n">decoder</span> <span class="o">=</span> <span class="s">&quot;ProtobufDecoder&quot;</span>
</pre></div>
</div>
<p>If a plugin fails to load during startup, hekad will exit at startup. When hekad is running, if a plugin should fail (due to connection loss, inability to write a file, etc.) then hekad will either shut down or restart the plugin if the plugin supports restarting.
When a plugin is restarting, hekad will likely stop accepting messages until the plugin resumes operation (this applies only to filters/output plugins).</p>
<p>Plugins specify that they support restarting by implementing the Restarting interface.</p>
<p>An internal diagnostic runner runs every 30 seconds to sweep the packs used for messages so that possible bugs in heka plugins can be reported and pinned down to a likely plugin(s) that failed to properly recycle the pack.</p>
<div class="section" id="global-configuration-options">
<h3>Global configuration options<a class="headerlink" href="#global-configuration-options" title="Permalink to this headline">¶</a></h3>
<p>You can optionally declare a <em>[hekad]</em> section in your configuration file to configure some global options for the heka daemon.</p>
</div>
<div class="section" id="example-hekad-toml-file">
<h3>Example hekad.toml file<a class="headerlink" href="#example-hekad-toml-file" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">hekad</span><span class="p">]</span>
<span class="n">cpuprof</span> <span class="o">=</span> <span class="s">&quot;/var/log/hekad/cpuprofile.log&quot;</span>
<span class="n">decoder_poolsize</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">max_message_loops</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">max_process_inject</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">max_timer_inject</span>  <span class="o">=</span> <span class="mi">10</span>
<span class="n">maxprocs</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">memprof</span> <span class="o">=</span> <span class="s">&quot;/var/log/hekad/memprof.log&quot;</span>
<span class="n">plugin_chansize</span> <span class="o">=</span> <span class="mi">10</span>
<span class="n">poolsize</span> <span class="o">=</span> <span class="mi">100</span>

<span class="c"># Listens for Heka messages on TCP port 5565.</span>
<span class="p">[</span><span class="n">TcpInput</span><span class="p">]</span>
<span class="n">address</span> <span class="o">=</span> <span class="s">&quot;:5565&quot;</span>
<span class="n">parser_type</span> <span class="o">=</span> <span class="s">&quot;message.proto&quot;</span>
<span class="n">decoder</span> <span class="o">=</span> <span class="s">&quot;ProtobufDecoder&quot;</span>

<span class="c"># Writes output from `CounterFilter`, `lua_sandbox`, and Heka&#39;s internal</span>
<span class="c"># reports to stdout.</span>
<span class="p">[</span><span class="n">debug</span><span class="p">]</span>
<span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;LogOutput&quot;</span>
<span class="n">message_matcher</span> <span class="o">=</span> <span class="s">&quot;Type == &#39;heka.counter-output&#39; || Type == &#39;heka.all-report&#39; || Type == &#39;heka.sandbox-output&#39;&quot;</span>

<span class="c"># Counts throughput of messages sent from a Heka load testing tool.</span>
<span class="p">[</span><span class="n">CounterFilter</span><span class="p">]</span>
<span class="n">message_matcher</span> <span class="o">=</span> <span class="s">&quot;Type == &#39;hekabench&#39; &amp;&amp; EnvVersion == &#39;0.8&#39;&quot;</span>
<span class="n">output_timer</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c"># Defines a sandboxed filter that will be written in Lua.</span>
<span class="p">[</span><span class="n">lua_sandbox</span><span class="p">]</span>
<span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;SandboxFilter&quot;</span>
<span class="n">message_matcher</span> <span class="o">=</span> <span class="s">&quot;Type == &#39;hekabench&#39; &amp;&amp; EnvVersion == &#39;0.8&#39;&quot;</span>
<span class="n">output_timer</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">script_type</span> <span class="o">=</span> <span class="s">&quot;lua&quot;</span>
<span class="n">preserve_data</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">filename</span> <span class="o">=</span> <span class="s">&quot;lua/sandbox.lua&quot;</span>
<span class="n">memory_limit</span> <span class="o">=</span> <span class="mi">32767</span>
<span class="n">instruction_limit</span> <span class="o">=</span> <span class="mi">1000</span>
<span class="n">output_limit</span> <span class="o">=</span> <span class="mi">1024</span>
</pre></div>
</div>
</div>
<div class="section" id="common-roles">
<h3>Common Roles<a class="headerlink" href="#common-roles" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>Agent</strong> - Single default filter that passes all messages directly to another hekad daemon on a separate machine configured as an Router.</li>
<li><strong>Aggregator</strong> - Runs filters that can roll-up statistics (similar to statsd), and handles aggregating similar messages before saving them to a back-end directly or possibly forwarding them to a hekad router.</li>
<li><strong>Router</strong> - Collects input messages from multiple sources (including other hekad daemons acting as Agents), rolls up stats, and routes messages to appropriate back-ends.</li>
</ul>
</div>
<div class="section" id="configuring-restarting-behavior">
<h3>Configuring Restarting Behavior<a class="headerlink" href="#configuring-restarting-behavior" title="Permalink to this headline">¶</a></h3>
<p>Plugins that support being restarted have a set of options that govern how the restart is handled. If preferred, the plugin can be configured to not restart at which point hekad will exit,
or it could be restarted only 100 times, or restart attempts can proceed forever.</p>
<p>Adding the restarting configuration is done by adding a config section to the plugins’ config called <em>retries</em> . A small amount of jitter will be added to the delay between restart attempts.</p>
<p>Parameters:</p>
<ul class="simple">
<li>max_jitter (string)</li>
<li>max_delay (string)</li>
<li>delay (string)</li>
<li>max_retries (int)</li>
</ul>
</div>
<div class="section" id="inputs">
<h3>Inputs<a class="headerlink" href="#inputs" title="Permalink to this headline">¶</a></h3>
<p><strong>AMQPInput</strong></p>
<p>Connects to a remote AMQP broker (RabbitMQ) and retrieves messages from the specified queue. As AMQP is dynamically programmable, the broker topology needs to be specified in the plugin configuration.</p>
<p><strong>UdpInput</strong></p>
<p>Listens on a specific UDP address and port for messages. If the message is signed it is verified against the signer name and specified key version. If the signature is not valid the message is discarded
otherwise the signer name is added to the pipeline pack and can be use to accept messages using the message_signer configuration option.</p>
<p>Parameters:</p>
<ul>
<li><p class="first">address(string): An IP address:port on which this plugin will listen.</p>
</li>
<li><dl class="first docutils">
<dt>signer: Optional TOML subsection. Section name consists of a signer name, underscore, and numeric version of the key.</dt>
<dd><ul class="first last simple">
<li>hmac_key (string): The hash key used to sign the message.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">decoder (string): A ProtobufDecoder instance must be specified for the message.proto parser. Use of a decoder is optional for token and regexp parsers; if no decoder is specified the raw input data is available in the Heka message payload.</p>
</li>
<li><dl class="first docutils">
<dt>parser_type (string):</dt>
<dd><ul class="first last simple">
<li>token - splits the stream on a byte delimiter.</li>
<li>regexp - splits the stream on a regexp delimiter.</li>
<li>message.proto - splits the stream on protobuf message boundaries.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>delimiter (string): Only used for token or regexp parsers.</dt>
<dd><p class="first last">Character or regexp delimiter used by the parser (default “n”). For the regexp delimiter a single capture group can be specified to preserve the delimiter (or part of the delimiter). The capture will be added to the start or end of the message depending on the delimiter_location configuration.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>delimiter_location (string): Only used for regexp parsers.</dt>
<dd><ul class="first last simple">
<li>start - the regexp delimiter occurs at the start of the message.</li>
<li>end - the regexp delimiter occurs at the end of the message (default).</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">UdpInput</span><span class="p">]</span>
<span class="n">address</span> <span class="o">=</span> <span class="s">&quot;127.0.0.1:4880&quot;</span>
<span class="n">parser_type</span> <span class="o">=</span> <span class="s">&quot;message.proto&quot;</span>
<span class="n">decoder</span> <span class="o">=</span> <span class="s">&quot;ProtobufDecoder&quot;</span>

<span class="p">[</span><span class="n">UdpInput</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">ops_0</span><span class="p">]</span>
<span class="n">hmac_key</span> <span class="o">=</span> <span class="s">&quot;4865ey9urgkidls xtb0[7lf9rzcivthkm&quot;</span>
<span class="p">[</span><span class="n">UdpInput</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">ops_1</span><span class="p">]</span>
<span class="n">hmac_key</span> <span class="o">=</span> <span class="s">&quot;xdd908lfcgikauexdi8elogusridaxoalf&quot;</span>

<span class="p">[</span><span class="n">UdpInput</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">dev_1</span><span class="p">]</span>
<span class="n">hmac_key</span> <span class="o">=</span> <span class="s">&quot;haeoufyaiofeugdsnzaogpi.ua,dp.804u&quot;</span>
</pre></div>
</div>
<p><strong>TcpInput</strong></p>
<p>参数与UdpInput相似。</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">TcpInput</span><span class="p">]</span>
<span class="n">address</span> <span class="o">=</span> <span class="s">&quot;:5565&quot;</span>
<span class="n">parser_type</span> <span class="o">=</span> <span class="s">&quot;message.proto&quot;</span>
<span class="n">decoder</span> <span class="o">=</span> <span class="s">&quot;ProtobufDecoder&quot;</span>

<span class="p">[</span><span class="n">TcpInput</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">ops_0</span><span class="p">]</span>
<span class="n">hmac_key</span> <span class="o">=</span> <span class="s">&quot;4865ey9urgkidls xtb0[7lf9rzcivthkm&quot;</span>
<span class="p">[</span><span class="n">TcpInput</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">ops_1</span><span class="p">]</span>
<span class="n">hmac_key</span> <span class="o">=</span> <span class="s">&quot;xdd908lfcgikauexdi8elogusridaxoalf&quot;</span>

<span class="p">[</span><span class="n">TcpInput</span><span class="o">.</span><span class="n">signer</span><span class="o">.</span><span class="n">dev_1</span><span class="p">]</span>
<span class="n">hmac_key</span> <span class="o">=</span> <span class="s">&quot;haeoufyaiofeugdsnzaogpi.ua,dp.804u&quot;</span>
</pre></div>
</div>
<p><strong>LogfileInput</strong></p>
<p>Tails a single log file, creating a message for each line in the file being monitored. Files are read in their entirety, and watched for changes. This input gracefully handles log rotation via the file moving but may lose a few log lines if using the “truncation” method of log rotation.
It’s recommended to use log rotation schemes that move the file to another location to avoid possible loss of log lines.</p>
<p>In the event the log file does not currently exist, it will be placed in an internal discover list, and checked for existence every discover_interval milliseconds (5000ms or 5s by default).</p>
<p>A single LogfileInput can only be used to read a single file. If you have multiple identical files spread across multiple directories (e.g. a <em>/var/log/hosts/&lt;HOSTNAME&gt;/app.log</em> structure,
where each <em>&lt;HOSTNAME&gt;</em> folder contains a log file originating from a separate host), you’ll want to use the <a class="reference external" href="https://hekad.readthedocs.org/en/latest/man/plugin.html#config-logfile-directory-manager-input">LogfileDirectoryManagerInput</a>.</p>
<p>Parameters:</p>
<ul>
<li><p class="first">logfile (string): Each LogfileInput can have a single logfile to monitor.</p>
</li>
<li><p class="first">hostname (string): The hostname to use for the messages, by default this will be the machines qualified hostname. This can be set explicitly to ensure its the correct name in the event the machine has multiple interfaces/hostnames.</p>
</li>
<li><p class="first">discover_interval (int): During logfile rotation, or if the logfile is not originally present on the system, this interval is how often the existence of the logfile will be checked for. The default of 5 seconds is usually fine. This interval is in milliseconds.</p>
</li>
<li><p class="first">stat_interval (int): How often the file descriptors for each file should be checked to see if new log data has been written. Defaults to 500 milliseconds. This interval is in milliseconds.</p>
</li>
<li><p class="first">logger (string): Each LogfileInput may specify a logger name to use in the case an error occurs during processing of a particular line of logging text. By default, the logger name is set to the logfile name.</p>
</li>
<li><p class="first">use_seek_journal (bool): Specifies whether to use a seek journal to keep track of where we are in a file to be able to resume parsing from the same location upon restart. Defaults to true.</p>
</li>
<li><dl class="first docutils">
<dt>seek_journal_name (string): Name to use for the seek journal file, if one is used. Only refers to the file name itself, not the full path; Heka will store all seek journals in a <em>seekjournal</em> folder relative to the Heka base directory.</dt>
<dd><p class="first last">Defaults to a sanitized version of the <em>logger</em> value (which itself defaults to the filesystem path of the input file). This value is ignored if <em>use_seek_journal</em> is set to false.</p>
</dd>
</dl>
</li>
<li><p class="first">resume_from_start (bool): When heka restarts, if a logfile cannot safely resume reading from the last known position, this flag will determine whether hekad will force the seek position to be 0 or the end of file. By default, hekad will resume reading from the start of file.</p>
</li>
<li><p class="first">decoder (string)</p>
</li>
<li><p class="first">parser_type (string)</p>
</li>
<li><p class="first">delimiter (string)</p>
</li>
<li><p class="first">delimiter_location (string)</p>
</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">LogfileInput</span><span class="p">]</span>
<span class="n">logfile</span> <span class="o">=</span> <span class="s">&quot;/var/log/opendirectoryd.log&quot;</span>
<span class="n">logger</span> <span class="o">=</span> <span class="s">&quot;opendirectoryd&quot;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">LogfileInput</span><span class="p">]</span>
<span class="n">logfile</span> <span class="o">=</span> <span class="s">&quot;/var/log/opendirectoryd.log&quot;</span>
</pre></div>
</div>
<p><strong>LogfileDirectoryManagerInput</strong></p>
<p>Scans for log files in a globbed directory path and when a new file matching the specified path is discovered it will start an instance of the LogfileInput plugin to process it.
Each LogfileInput will inherit its configuration from the manager’s settings with the logfile property properly adjusted.</p>
<p>Parameters: (identical to LogfileInput with the following exceptions)</p>
<ul>
<li><p class="first">logfile (string): A path with a globbed directory component pointing to a common (statically named) log file. Note that only directories can be globbed; the file itself must have the same name in each directory.</p>
</li>
<li><dl class="first docutils">
<dt>seek_journal_name (string): With a LogfileInput it is possible to specify a particular name for the seek journal file that will be used. This is not possible with the LogfileDirectoryManagerInput;</dt>
<dd><p class="first last">the seek_journal_name will always be auto- generated, and any attempt to specify a hard coded seek_journal_name will be treated as a configuration error.</p>
</dd>
</dl>
</li>
<li><p class="first">ticker_interval (uint): Time interval (in seconds) between directory scans for new log files. Defaults to 0 (only scans once on startup).</p>
</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">vhosts</span><span class="p">]</span>
<span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;LogfileDirectoryManagerInput&quot;</span>
<span class="n">logfile</span> <span class="o">=</span> <span class="s">&quot;/var/log/vhost/*/apache.log&quot;</span>
</pre></div>
</div>
<p><strong>StatsdInput</strong></p>
<p><strong>StatAccumInput</strong></p>
<p><strong>ProcessInput</strong></p>
<p>Executes one or more external programs on an interval, creating messages from the output. If a chain of commands is used, stdout is piped into the next command’s stdin.
In the event the program returns a non-zero exit code, ProcessInput will stop, logging the exit error.</p>
<p>Each command is defined with the following parameters:</p>
<ul>
<li><p class="first">name (string): Each ProcessInput must have a name defined for logging purposes. The messages will be tagged with name.stdout or name.stderr in the ProcessInputName field of the heka message.</p>
</li>
<li><dl class="first docutils">
<dt>command (map[uint]cmd_config): he command is a structure that contains the full path to the binary, command line arguments, optional enviroment variables and an optional working directory.</dt>
<dd><p class="first last">See the <em>cmd_config</em> definition below. ProcessInput expects the commands to be indexed by integers starting with 0.</p>
</dd>
</dl>
</li>
<li><p class="first">ticker_interval (uint): The number of seconds to wait between runnning <em>command</em> . Defaults to 15. A ticker_interval of 0 indicates that the command is run once.</p>
</li>
<li><p class="first">stdout (bool): Capture stdout from <em>command</em> . Defaults to true.</p>
</li>
<li><p class="first">stderr (bool): Capture stderr from <em>command</em> . Defaults to false.</p>
</li>
<li><p class="first">decoder (string): Name of the decoder instance to send messages to. Default is to inject messages back into the main heka router.</p>
</li>
<li><dl class="first docutils">
<dt>parser_type (string):</dt>
<dd><ul class="first last simple">
<li>token - splits the log on a byte delimiter (default).</li>
<li>regexp - splits the log on a regexp delimiter.</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">delimiter (string): Only used for token or regexp parsers.</p>
</li>
<li><p class="first">delimiter_location (string): Only used for regexp parsers.</p>
</li>
<li><p class="first">timeout (uint): Timeout in seconds before any one of the commands in the chain is terminated.</p>
</li>
<li><p class="first">trim (bool) : Trim a single trailing newline character if one exists. Default is true.</p>
</li>
</ul>
<p>cmd_config structure:</p>
<ul class="simple">
<li>bin (string): The full path to the binary that will be executed.</li>
<li>args ([]string): Command line arguments to pass into the executable.</li>
<li>environment ([]string): Used to set environment variables before <em>command</em> is run. Default is nil, which uses the heka process’s environment.</li>
<li>directory (string): Used to set the working directory of <em>Bin</em> Default is “”, which uses the heka process’s working directory.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre>[ProcessInput]
name = &quot;DemoProcessInput&quot;
ticker_interval = 2
parser_type = &quot;token&quot;
delimiter = &quot; &quot;
stdout = true
stderr = false
trim = true

[ProcessInput.command.0]
bin = &quot;/bin/cat&quot;
args = [&quot;../testsupport/process_input_pipes_test.txt&quot;]

[ProcessInput.command.1]
bin = &quot;/usr/bin/grep&quot;
args = [&quot;ignore&quot;]
</pre></div>
</div>
<p><strong>HttpInput</strong></p>
<p>Starts a HTTP client which intermittently polls a URL for data. The entire response body is parsed by a decoder into a pipeline pack.
Data is always fetched using HTTP GET and any status code 200 generates a message with a configurable “sucess severity” (defaults to 6 or “information”).
Any non-200 status generate a message with a configurable “error severity” (defaults to 1 or “alert”) and are not fatal for the plugin.</p>
<p>Errors returned from HTTP GET such as inability to connect to remote host generate a message with a configurable “error severity” (defaults to 1 or “alert”) and of Type “heka.httpinput.error”.</p>
<p>Parameters:</p>
<ul class="simple">
<li>url (string): A HTTP URL which this plugin will regularly poll for data. This option cannot be used with the urls option. No default URL is specified.</li>
<li>urls (array): An array of HTTP URLs which this plugin will regularly poll for data. This option cannot be used with the url option. No default URLs are specified.</li>
<li>ticker_interval (uint): Time interval (in seconds) between attempts to poll for new data. Defaults to 10.</li>
<li>success_severity (uint): Severity level of successful HTTP GET. Defaults to 6 (information).</li>
<li>error_severity (uint): Severity level of errors, unreachable connections, and non-200 responses of successful HTTP GET. Defaults to 1 (alert).</li>
<li>decoder (string): The name of the decoder used to transform the response body text into a structured hekad message. No default decoder is specified.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">HttpInput</span><span class="p">]</span>
<span class="n">url</span> <span class="o">=</span> <span class="s">&quot;http://localhost:9876/&quot;</span>
<span class="n">ticker_interval</span> <span class="o">=</span> <span class="mi">5</span>
<span class="n">success_severity</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">error_severity</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">decoder</span> <span class="o">=</span> <span class="s">&quot;ProtobufDecoder&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="decoders">
<h3>Decoders<a class="headerlink" href="#decoders" title="Permalink to this headline">¶</a></h3>
<p><strong>ProtobufDecoder</strong></p>
<p><strong>PayloadRegexDecoder</strong></p>
<p>Decoder plugin that accepts messages of a specified form and generates new outgoing messages from extracted data, effectively transforming one message format into another.</p>
<p><strong>PayloadJsonDecoder</strong></p>
<p>This decoder plugin accepts JSON blobs and allows you to map parts of the JSON into Field attributes of the pipeline pack message using JSONPath syntax.</p>
<p><strong>PayloadXmlDecoder</strong></p>
<p>This decoder plugin accepts XML blobs in the message payload and allows you to map parts of the XML into Field attributes of the pipeline pack message using XPath syntax using the <a class="reference external" href="https://launchpad.net/xmlpath">xmlpath</a> library.</p>
<p><strong>StatsToFieldsDecoder</strong></p>
<p><strong>MultiDecoder</strong></p>
<p>This decoder plugin allows you to specify an ordered list of delegate decoders. The MultiDecoder will pass the PipelinePack to be decoded to each of the delegate decoders in turn until decode succeeds.
In the case of failure to decode, MultiDecoder will return an error and recycle the message.</p>
<p><strong>Sandbox Decoder</strong></p>
<p>The sandbox decoder provides an isolated execution environment for data parsing and complex transformations without the need to recompile Heka.</p>
</div>
<div class="section" id="common-filter-output-parameters">
<h3>Common Filter / Output Parameters<a class="headerlink" href="#common-filter-output-parameters" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>message_matcher (string, optional): Boolean expression, when evaluated to true passes the message to the filter for processing. Defaults to matching nothing. See: <a class="reference external" href="https://hekad.readthedocs.org/en/latest/message_matcher.html#message-matcher">Message Matcher Syntax</a></li>
<li>message_signer (string, optional): The name of the message signer. If specified only messages with this signer are passed to the filter for processing.</li>
<li>ticker_interval (uint, optional): Frequency (in seconds) that a timer event will be sent to the filter. Defaults to not sending timer events.</li>
</ul>
</div>
<div class="section" id="filters">
<h3>Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h3>
<p><strong>CounterFilter</strong></p>
<p>Once a second a CounterFilter will generate a message of type <em>heka.counter-output</em> . The payload will contain text indicating the number of messages that matched the filter’s <em>message_matcher</em> value during that second (i.e. it counts the messages the plugin received).
Every ten seconds an extra message (also of type <em>heka.counter-output</em> ) goes out, containing an aggregate count and average per second throughput of messages received.</p>
<p>Parameters: <strong>None</strong></p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">CounterFilter</span><span class="p">]</span>
<span class="n">message_matcher</span> <span class="o">=</span> <span class="s">&quot;Type != &#39;heka.counter-output&#39;&quot;</span>
</pre></div>
</div>
<p><strong>StatFilter</strong></p>
<p><strong>SandboxFilter</strong></p>
<p><strong>SandboxManagerFilter</strong></p>
</div>
<div class="section" id="outputs">
<h3>Outputs<a class="headerlink" href="#outputs" title="Permalink to this headline">¶</a></h3>
<p><strong>AMQPOutput</strong></p>
<p><strong>LogOutput</strong></p>
<p>Logs messages to stdout using Go’s <em>log</em> package.</p>
<p><strong>FileOutput</strong></p>
<p>Writes message data out to a file system.</p>
<p>Parameters:</p>
<ul class="simple">
<li>path (string): Full path to the output file.</li>
<li>format (string, optional): Output format for the message to be written. Supports <em>json</em> or <em>protobufstream</em> , both of which will serialize the entire <em>Message</em> struct, or <em>text</em>, which will output just the payload string. Defaults to <tt class="docutils literal"><span class="pre">text</span></tt></li>
<li>prefix_ts (bool, optional): Whether a timestamp should be prefixed to each message line in the file. Defaults to <tt class="docutils literal"><span class="pre">false</span></tt> .</li>
<li>perm (string, optional): File permission for writing. A string of the octal digit representation. Defaults to “644”.</li>
</ul>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">counter_file</span><span class="p">]</span>
<span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;FileOutput&quot;</span>
<span class="n">message_matcher</span> <span class="o">=</span> <span class="s">&quot;Type == &#39;heka.counter-output&#39;&quot;</span>
<span class="n">path</span> <span class="o">=</span> <span class="s">&quot;/var/log/heka/counter-output.log&quot;</span>
<span class="n">prefix_ts</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">perm</span> <span class="o">=</span> <span class="s">&quot;666&quot;</span>
</pre></div>
</div>
<p><strong>TcpOutput</strong></p>
<p>Output plugin that serializes messages into the Heka protocol format and delivers them to a listening TCP connection. Can be used to deliver messages from a local running Heka agent to a remote Heka instance set up as an aggregator and/or router.</p>
<p>Parameters:</p>
<ul class="simple">
<li>address (string): An IP address:port to which we will send our output data.</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="p">[</span><span class="n">aggregator_output</span><span class="p">]</span>
<span class="nb">type</span> <span class="o">=</span> <span class="s">&quot;TcpOutput&quot;</span>
<span class="n">address</span> <span class="o">=</span> <span class="s">&quot;heka-aggregator.mydomain.com:55&quot;</span>
<span class="n">message_matcher</span> <span class="o">=</span> <span class="s">&quot;Type != &#39;logfile&#39; &amp;&amp; Type != &#39;heka.counter-output&#39; &amp;&amp; Type != &#39;heka.all-report&#39;&quot;</span>
</pre></div>
</div>
<p><strong>DashboardOutput</strong></p>
<p>Specialized output plugin that listens for certain Heka reporting message types and generates JSON data which is made available via HTTP for use in web based dashboards and health reports.</p>
<p><strong>ElasticSearchOutput</strong></p>
<p>Output plugin that serializes messages into JSON structures and uses HTTP requests to insert them into an ElasticSearch database.</p>
<p><strong>WhisperOutput</strong></p>
<p><strong>NagiosOutput</strong></p>
<p><strong>CarbonOutput</strong></p>
<p><strong>SmtpOutput</strong></p>
<p>Outputs a Heka message in an email. The message subject is the plugin name and the message content is controlled by the payload_only setting. The primary purpose is for email alert notifications i.e., PagerDuty.</p>
<p>Parameters:</p>
<ul class="simple">
<li>payload_only (bool): If set to true, then only the message payload string will be emailed, otherwise the entire Message struct will be emailed in JSON format. (default: true)</li>
<li>send_from (string): email address of the sender</li>
<li>send_to (array of strings): array of email addresses to send the message to</li>
<li>host (string): SMTP host to send the email to</li>
<li>auth (string): SMTP authentication type: “none”, “Plain”, “CRAMMD5” (default: “none”)</li>
<li>user (string, optional): SMTP user name</li>
<li>password (string, optional): SMTP user password</li>
</ul>
</div>
</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../development/php.html" class="btn btn-neutral float-right" title="PHP">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../heka.html" class="btn btn-neutral" title="heka"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2013, youngsterxyf.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../static/jquery.js"></script>
      <script type="text/javascript" src="../../static/underscore.js"></script>
      <script type="text/javascript" src="../../static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>